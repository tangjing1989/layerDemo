<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tangjing.web.dao.DataTemplateMapper">

    <select id="existTable" parameterType="String" resultType="Integer">
        select count(1)
        from sys.systables
        where LCASE(tablename)=#{tableName}
    </select>

    <update id="dropTable">
        drop table ${tableName}
    </update>

    <!--<update id="createNewTable" parameterType="java.util.Map" statementType="STATEMENT">-->
    <!--create table ${tableName} (-->
    <!--id int not null generated by default as identity,-->
    <!--author_id int not null,-->
    <!--title varchar(255),-->
    <!--primary key (id))-->
    <!--</update>-->


    <update id="createNewTable"  statementType="STATEMENT">
        create table if not exists ${tableName}
        <!--<foreach collection="map.keys" item="k" index="index" open="(" separator="," close=");">-->
            <!--${k}  ${params[${k}]} not null-->
        <!--</foreach>-->

        <foreach item="value" index="key" collection="map.entrySet()" open="(" separator="," close=")">
            ${key}  ${value} not null
        </foreach>
        COMMENT = '测试表'
    </update>

</mapper>